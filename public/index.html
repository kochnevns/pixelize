<!DOCTYPE html>
<html>
<head>
	<link href="https://fonts.googleapis.com/css?family=Coming+Soon" rel="stylesheet">
	<title>Pixelize</title>
</head>
<body>

	<div class="content">
		<div>
			<h1 class="glow">Pixelize</h1>
			<div class="boxes">
				<div class="left">
  <div class="box__input">
    <input class="box__file" type="file" name="kek" id="fileinput" data-multiple-caption="{count} files selected" multiple />
    <label for="file"><strong>Choose a file</strong><span class="box__dragndrop"> or drag it here</span>.</label>
    <button class="box__button" type="submit">Upload</button>
  </div>
				</div>
				<div class="right">
					<img id="wait" style="display:none" src="wait.gif"</img>
					<img id="result" style="display:none" src=""></img>
				</div>
			</div>
		</div>
	</div>
</body>
<script>
	// Select your input type file and store it in a variable
const input = document.getElementById('fileinput');

// This will upload the file after having read it
const upload = (file) => {
	const formData = new FormData();

formData.append('kek', file);
window.originalFilename = file.name;

const opts = { // Your POST endpoint
	    method: 'POST',
    	body: formData // This is your file object
  };
  document.getElementById('wait').style.display = 'block';
  fetch('/', opts ).then(
    success => {
    console.log(success)
      document.getElementById('wait').style.display = 'none';
        document.getElementById('result').style.display = 'block';

  		document.getElementById('result').src = 'keklol' + window.originalFilename;

    } // Handle the success response object
  ).catch(
    error => console.log(error) // Handle the error response object
  );
};

// Event handler executed when a file is selected
const onSelectFile = () => upload(input.files[0]);

// Add a listener on your input
// It will be triggered when a file will be selected
input.addEventListener('change', onSelectFile, false);
</script>
<style type="text/css">
	html {
		background-image: url('new.png');
	    background-size: cover;
	    background-repeat: no-repeat;
	    display: block;
	    width: 100%;
	    background-position-y: bottom;
	    height: 100%;
	    color: #fff;
	}
	.content {
		width: 95%;
		height: 90%;
		margin: auto;
		background: rgba(0,0,0, .8);
		margin-top: 10px;
	}
	body {
	    width: 100%;
    	height: 100%;
	}
	h1 {
		font-family: 'Coming Soon', cursive;
		color: #fff;
		font-size: 6rem;
		text-align: center;
		padding-top: 40px;

	}
	.boxes {
			display: flex;
	flex-direction: row;
	flex-wrap: wrap;
	justify-content: flex-start;
	align-content: stretch;
	align-items: flex-start;
	}

	.left, .right {
		border: 3px solid #fff;
		flex: 2;
    width: 40%;
    height: 400px;
    margin: 16px;
    padding: 8px;
	}
	.glow {
  font-size: 80px;
  color: #fff;
  text-align: center;
  -webkit-animation: glow 1s ease-in-out infinite alternate;
  -moz-animation: glow 1s ease-in-out infinite alternate;
  animation: glow 1s ease-in-out infinite alternate;
}

@-webkit-keyframes glow {
  from {
    text-shadow: 0 0 10px #fff, 0 0 20px #fff, 0 0 30px #00bfff, 0 0 40px #00bfff, 0 0 50px #00bfff, 0 0 60px #00bfff, 0 0 70px #00bfff;
  }
  to {
    text-shadow: 0 0 20px #fff, 0 0 30px #bfff, 0 0 40px #bfff, 0 0 50px #bfff, 0 0 60px #bfff, 0 0 70px #bfff, 0 0 80px #bfff;
  }
}
#result {
	    width: 75%;
    height: 100%;
    padding: 16px;
}
</style>
</html>